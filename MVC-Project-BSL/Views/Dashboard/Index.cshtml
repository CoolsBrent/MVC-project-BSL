@{
	ViewData["Title"] = "Dashboard";
}
﻿@using System.Globalization
@using MVC_Project_BSL.ViewModels
@model GroepsreisViewModel

<div class="hero-section-dashboard bg-navbar text-black text-center py-5 rounded-3 mb-3 position-relative">
	<div class="container">
		<h2 class="display-4">Welkom op je dashboard, @User.Identity.Name!</h2>

		<!-- Knop wordt absoluut gepositioneerd -->
		<a href="@Url.Action("Index", "PersoonlijkeGegevens")" class="btn btn-primary position-absolute" style="bottom: 10px; right: 10px;">
			<i class="bi bi-person-lines-fill"></i> Beheer
		</a>
	</div>
</div>


<!-- Knoppen voor beheer -->
@if (User.IsInRole("Beheerder"))
{
	<div class="row mb-4">
		<div class="col-md-3">
			<a href="@Url.Action("Index", "RoleManagement")" class="btn btn-primary btn-block">Gebruikers Beheren</a>
		</div>
		<div class="col-md-3">
			<a href="@Url.Action("Index", "Groepsreis")" class="btn btn-success btn-block">Groepsreizen Beheren</a>
		</div>
		<div class="col-md-3">
			<a href="@Url.Action("Index", "Activiteit")" class="btn btn-info btn-block">Activiteiten Beheren</a>
		</div>
		<div class="col-md-3">
			<a href="@Url.Action("Index", "Opleidingen")" class="btn btn-warning btn-block">Opleidingen Beheren</a>
		</div>
	</div>
}



<form method="get" asp-action="Index" class="mb-4 d-flex justify-content-center">
	<div class="d-flex">
		<!-- Filter op Bestemming -->
		<div class="form-group me-2">
			<select class="form-control" name="bestemming">
				<option value="">Alle bestemmingen</option>
				@foreach (var bestemming in Model.AlleBestemmingen)
				{
					<option value="@bestemming.BestemmingsNaam">@bestemming.BestemmingsNaam</option>
				}
			</select>
		</div>

		<div class="form-group">
			<button type="submit" class="btn btn-primary">
				<i class="bi bi-sliders"></i>
			</button>
		</div>
	</div>
</form>

@if (User.IsInRole("Beheerder"))
{
	<ul class="nav nav-tabs">
		<li class="nav-item">
			<a class="nav-link active" data-bs-toggle="tab" href="#tab1">Actieve Groepsreizen</a>
		</li>
		<li class="nav-item">
			<a class="nav-link" data-bs-toggle="tab" href="#tab2">Gearchiveerde Groepsreizen</a>
		</li>
	</ul>

	<div class="tab-content">
		<div id="tab1" class="tab-pane fade show active">

			<div class="row mb-4 mt-4">

				@if (!Model.AlleGroepsReizen.Any())
				{
					<div class="alert alert-warning">
						Geen groepsreizen gevonden.
					</div>
				}
				else
				{

					@foreach (var groepsreis in Model.AlleGroepsReizen)
					{
						<div class="col-md-4 mb-4">
							<div class="card h-100">
								<a asp-controller="Groepsreis" asp-action="Detail" asp-route-id="@groepsreis.Id" class="text-decoration-none text-reset">
									@{
										// Haal de eerste foto op, als deze beschikbaar is
										var eersteFoto = groepsreis.Bestemming?.Fotos?.FirstOrDefault();
									}
									<img src="~/images/@eersteFoto.Naam" class="card-img-top" alt="@groepsreis.Bestemming?.BestemmingsNaam" style="height: 300px;object-fit: cover;
    object-position: center;" />
									<div class="card-body">
										<h5 class="card-title">@groepsreis.Bestemming?.BestemmingsNaam</h5>
										<p class="card-text">@groepsreis.Bestemming?.Beschrijving</p>
										<p class="card-text"><i class="bi bi-calendar-event"></i> @groepsreis.Begindatum.ToShortDateString() - @groepsreis.Einddatum.ToShortDateString()</p>
										<p class="card-text"><i class="bi bi-cake"></i> @groepsreis.Bestemming?.MinLeeftijd - @groepsreis.Bestemming?.MaxLeeftijd</p>
										<p class="card-text">@groepsreis.Prijs.ToString("C", new CultureInfo("nl-BE"))</p>
									</div>
								</a>
							</div>
						</div>
					}
				}
			</div>
		</div>
		<div id="tab2" class="tab-pane fade">

			<div class="row mb-4 mt-4">
				@if (!Model.GearchiveerdeGroepsreizen.Any())
				{
					<div class="alert alert-warning">
						Geen gearchiveerde groepsreizen gevonden.
					</div>

				}
				else
				{

					@foreach (var groepsreis in Model.GearchiveerdeGroepsreizen)
					{
						<div class="col-md-4 mb-4">
							<div class="card h-100">
								<a asp-controller="Groepsreis" asp-action="Detail" asp-route-id="@groepsreis.Id" class="text-decoration-none text-reset">
									@{
										// Haal de eerste foto op, als deze beschikbaar is
										var eersteFoto = groepsreis.Bestemming?.Fotos?.FirstOrDefault();
									}
									<img src="~/images/@eersteFoto.Naam" class="card-img-top" alt="@groepsreis.Bestemming?.BestemmingsNaam" style="height: 300px;object-fit: cover;
    object-position: center;" />
									<div class="card-body">
										<h5 class="card-title">@groepsreis.Bestemming?.BestemmingsNaam</h5>
										<p class="card-text">@groepsreis.Bestemming?.Beschrijving</p>
										<p class="card-text"><i class="bi bi-calendar-event"></i> @groepsreis.Begindatum.ToShortDateString() - @groepsreis.Einddatum.ToShortDateString()</p>
										<p class="card-text"><i class="bi bi-cake"></i> @groepsreis.Bestemming?.MinLeeftijd - @groepsreis.Bestemming?.MaxLeeftijd</p>
										<p class="card-text">@groepsreis.Prijs.ToString("C", new CultureInfo("nl-BE"))</p>
									</div>
								</a>
							</div>
						</div>
					}
				}
			</div>
		</div>
	</div>


}


@if (!User.IsInRole("Beheerder"))
{
	<div class="row mb-4">
		@if (!Model.GeboekteGroepsReizen.Any())
		{
			<div class="alert alert-warning">
				Geen groepsreizen gevonden.
			</div>
	  }
	else
	{
		<h3 class="p-3">Mijn Reizen</h3>
		@foreach (var groepsreis in Model.GeboekteGroepsReizen)
    {
				<div class="col-md-4 mb-4">
					<div class="card h-100">
						<a asp-controller="Groepsreis" asp-action="Detail" asp-route-id="@groepsreis.Id" class="text-decoration-none text-reset">
							@{
								// Haal de eerste foto op, als deze beschikbaar is
								var eersteFoto = groepsreis.Bestemming?.Fotos?.FirstOrDefault();
							}
							<img src="~/images/@eersteFoto.Naam" class="card-img-top" alt="@groepsreis.Bestemming?.BestemmingsNaam" style="height: 300px;object-fit: cover;
    object-position: center;" />
							<div class="card-body">
								<h5 class="card-title">@groepsreis.Bestemming?.BestemmingsNaam</h5>
								<p class="card-text">@groepsreis.Bestemming?.Beschrijving</p>
								<p class="card-text"><i class="bi bi-calendar-event"></i> @groepsreis.Begindatum.ToShortDateString() - @groepsreis.Einddatum.ToShortDateString()</p>
								<p class="card-text"><i class="bi bi-cake"></i> @groepsreis.Bestemming?.MinLeeftijd - @groepsreis.Bestemming?.MaxLeeftijd</p>
								<p class="card-text">@groepsreis.Prijs.ToString("C", new CultureInfo("nl-BE"))</p>
							</div>
						</a>
					</div>
				</div>
			}
		}
	</div>
	<div class="row mb-4">
		@if (!Model.ToekomstigeGroepsReizen.Any())
		{
			<div class="alert alert-warning">
				Geen groepsreizen gevonden.
			</div>
	}
	else
	{
			<h3 class="p-3">Te Ontdekken Reizen</h3>
			<div class="row">
				@foreach (var groepsreis in Model.ToekomstigeGroepsReizen)
				{
					<div class="col-md-4 mb-4">
						<a asp-controller="Groepsreis" asp-action="Detail" asp-route-id="@groepsreis.Id" class="text-decoration-none text-reset">
							<div class="card h-100">
								@{
									// Haal de eerste foto op, als deze beschikbaar is
									var eersteFoto = groepsreis.Bestemming?.Fotos?.FirstOrDefault();
								}
								<img src="~/images/@eersteFoto.Naam" class="card-img-top" alt="@groepsreis.Bestemming?.BestemmingsNaam" style="height: 300px;object-fit: cover;
    object-position: center;" />
								<div class="card-body">
									<h5 class="card-title">@groepsreis.Bestemming?.BestemmingsNaam</h5>
									<p class="card-text">@groepsreis.Bestemming?.Beschrijving</p>
									<p class="card-text"><i class="bi bi-calendar-event"></i> @groepsreis.Begindatum.ToShortDateString() - @groepsreis.Einddatum.ToShortDateString()</p>
									<p class="card-text"><i class="bi bi-cake"></i> @groepsreis.Bestemming?.MinLeeftijd - @groepsreis.Bestemming?.MaxLeeftijd</p>
									<p class="card-text">@groepsreis.Prijs.ToString("C", new CultureInfo("nl-BE"))</p>
								</div>
							</div>
						</a>
					</div>
				}
			</div>
		}
	</div>
}



